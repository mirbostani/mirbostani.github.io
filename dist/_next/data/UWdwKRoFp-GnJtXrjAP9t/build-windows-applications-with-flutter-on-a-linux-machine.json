{"pageProps":{"slug":"build-windows-applications-with-flutter-on-a-linux-machine","postData":{"slug":"build-windows-applications-with-flutter-on-a-linux-machine","headingAnchors":[{"heading":"h2","title":"Introduction","anchorId":"introduction"},{"heading":"h2","title":"Create a Virtual Machine","anchorId":"create_a_virtual_machine"},{"heading":"h2","title":"Update Windows PowerShell","anchorId":"update_windows_powershell"},{"heading":"h2","title":"Install Git","anchorId":"install_git"},{"heading":"h2","title":"Install Visual Studio 2019","anchorId":"install_visual_studio_2019"},{"heading":"h2","title":"Install Flutter","anchorId":"install_flutter"},{"heading":"h2","title":"Enable Desktop Support","anchorId":"enable_desktop_support"},{"heading":"h2","title":"Build an Application","anchorId":"build_an_application"},{"heading":"h2","title":"Distribute as a Zip File","anchorId":"distribute_as_a_zip_file"}],"contentHtml":"<h2>Introduction</h2>\n<p>Flutter is an open-source framework suitable for developing applications for multiple platforms. You can install it on your operating system of choice for developing web, mobile, and desktop applications; however, you cannot build your applications for all the supported platforms using a single operating system.</p>\n<p>I've been using Linux Operating System as my primary development environment, mainly because of its power and flexibility. However, I can't build Windows applications using Flutter on my Linux machine since it requires Visual Studio 2019 for Windows desktop development with C++. However, there is an effective solution available. In this article, I will explain how to set up all the requirements of Flutter on a Windows Virtual Machine to compile an application targeting the Windows operating system.</p>\n<h2>Create a Virtual Machine</h2>\n<p><a href=\"https://www.virtualbox.org/\">VirtualBox</a> enables you to create a virtual machine (VM) on Linux. The first step is to <a href=\"https://www.virtualbox.org/wiki/Downloads\">download</a> and install it on your current operating system. After the installation is complete, open VirtualBox and choose \"New\" to create a new VM.</p>\n<p>Provide a name for your VM, select \"Windows 7\" as your operating system, and set the memory size as you need. If you don't have an existing virtual hard disk, select \"Create a virtual hard disk now.\"</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/create-virtual-machine.png\" alt=\"create a virtual machine\"></p>\n<p>You are required to have at least 30GB of storage on your virtual hard disk. You can choose between a Dynamically Allocated or a Fixed Size virtual hard disk. The Dynamically Allocated type initially takes a limited amount of physical disk space and gradually grows in size as you use your virtual machine. Hence this is a proper choice if the disk space on your system is limited. The Fixed Size type creates a file with the specified size on your physical disk beforehand, and it is much faster than the first type.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/create-virtual-hard-disk.png\" alt=\"create a virtual hard disk\"></p>\n<p>If your host system has multiple CPUs, you can allocate more than one processor to operate your VM. It is better not to exceed the maximum number of recommended processors, in my case, 4 CPUs.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-processor.png\" alt=\"settings, processor\"></p>\n<p>It is recommended to increase the video memory size to the maximum value for improving guest machine performance.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-screen.png\" alt=\"settings, screen\"></p>\n<p>Your created guest virtual machine is like real hardware with all parts configurable. To install an operating system on this machine, you can mount Windows Installation DVD/USB or an ISO image file.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-mount-win7-image.png\" alt=\"settings, mount windows 7 image\"></p>\n<p>You can mount some shared spaces to be accessed by both the host and the guest machine, as this is a more convenient method of sharing storage resources between two operating systems. However, some limitations might occur due to the file system inconsistencies between different types of operating systems.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-shared-folders.png\" alt=\"settings, shared folders\"></p>\n<p>During the initial steps of the Windows installation, you can select the only drive available on the guest machine and create a single partition. Here, Windows 7 automatically creates a System Reserved and a single primary partition. Select the primary partition for OS installation.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/windows-setup-create-new-partition.png\" alt=\"windows setup, create new partition\"></p>\n<p>Continue with the remaining configurations until the Windows installation is initiated. The installation process takes some time based on the type of hardware you have.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-windows.png\" alt=\"windows setup, installation started\"></p>\n<p>During the installation, your guest machine will restart multiple times. Do not press any keys if it asks, or the process will be started from the beginning. You can unmount the ISO image file when the installation is finished successfully.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/windows-installed.png\" alt=\"windows setup, installation finished\"></p>\n<p>Open menu \"Devices\" and select \"Insert Guest Additions CD Image...\" to mount VirtualBox Guest Additions 5.1.18, then run it. After it is finished, you should reboot your guest machine for all the changes to take effect. Now, you will be able to change the size of the guest machine's window on your host operating system.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/virtualbox-guest-additions.png\" alt=\"windows setup, installation finished\"></p>\n<h2>Update Windows PowerShell</h2>\n<p>Check the version of the currently installed PowerShell (PS) on your Windows 7 by running Windows PowerShell from the start menu and entering the following command:</p>\n<pre><code>PS C:\\Users\\win7> $PSVersionTable.PSVersion\n\nMajor  Minor  Build  Revision\n-----  -----  -----  --------\n2      0      -1     -1\n</code></pre>\n<p>Flutter depends on Windows Powershell 5.0 or higher, so we have to update it now. After downloading <a href=\"https://docs.microsoft.com/en-us/powershell/scripting/install/installing-windows-powershell\">Windows Powershell 5.1</a> and extracting <code>Win7AndW2K8R2-KB3191566-x64.zip</code> file, run existing PS in administrator mode and disable <code>ExecutionPolicy</code> before executing <code>Install-WMF5.1</code> script:</p>\n<pre><code>PS C:\\Users\\win7\\Downloads\\Win7AndW2k8R2-KB3191566-x64> Set-ExecutionPolicy Bypass\nPS C:\\Users\\win7\\Downloads\\Win7AndW2k8R2-KB3191566-x64> powershell.exe -F .\\Install-WMF5.1.ps1\n</code></pre>\n<p>After a mandatory system restart, verify the current PS version again for confirmation.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/verify-powershell.png\" alt=\"verify powershell\"></p>\n<h2>Install Git</h2>\n<p>Download and install <a href=\"https://git-scm.com/download/win\">Git 64-bit for Windows</a>. You should be able to run <code>git</code> commands from PS after the installation is complete.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-git-on-windows-vm.png\" alt=\"installing git on windows vm\"></p>\n<h2>Install Visual Studio 2019</h2>\n<p>To create Windows applications using Flutter, you should have <a href=\"https://visualstudio.microsoft.com/downloads/\">Visual Studio 2019 Community</a> on your system.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/downloading-visualstudio.png\" alt=\"downloading visual studio\"></p>\n<p>For Win32, you need the \"Desktop development with C++\" workload installed, including all of its default components. For UWP, you need the \"Universal Windows Platform development\" workload installed with the optional UWP C++ tools.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-visualstudio.png\" alt=\"installing visual studio\"></p>\n<h2>Install Flutter</h2>\n<p>Now is the time to set up Flutter on your VM. Download <a href=\"https://storage.googleapis.com/flutter_infra_release/releases/stable/windows/flutter_windows_2.5.3-stable.zip\">flutter_windows_2.5.3-stable.zip</a> and extract the content of the archive to <code>C:\\flutter</code>. Then, search for <code>env</code> in Windows and add <code>Path</code> as a user environment variable with the <code>C:\\flutter\\bin</code> value. It enables you to call Flutter from any path in PS.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/add-flutter-to-path-env-variable.png\" alt=\"add flutter to windows envirtonment variable\"></p>\n<h2>Enable Desktop Support</h2>\n<p>Open a PS and modify Flutter configuration to enable Windows Desktop support.</p>\n<pre><code>PS C:\\> flutter config --enable-windows-desktop\n</code></pre>\n<p>For Universal Windows Platform (UWP) applications, use the following commands:</p>\n<pre><code>PS C:\\> flutter channel dev\nPS C:\\> flutter upgrade\nPS C:\\> flutter config --enable-windows-uwp-desktop\n</code></pre>\n<h2>Build an Application</h2>\n<p>To create a new Flutter application, open a PS and call the <code>flutter create</code> command. After the application is created, build and release it for the Windows platform.</p>\n<pre><code>PS C:\\projects> flutter create myapp\nPS C:\\projects\\myapp> cd myapp\nPS C:\\projects\\myapp> flutter run -d windows --release\n</code></pre>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/build-a-flutter-app-for-windows.png\" alt=\"build a flutter application for windows\"></p>\n<h2>Distribute as a Zip File</h2>\n<p>The most efficient way of finding dependencies of an executable file in Windows is using <code>dumpbin.exe</code> from Microsoft Visual Studio tools. This program is able to list all the <code>dll</code> files required for the Flutter application to run on Windows properly.</p>\n<pre><code>PS C:\\> cd C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64\nPS C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64> dumpbin.exe /dependents C:\\projects\\myapp\\build\\windows\\runner\\Release\\myapp.exe\n\nflutter_windows.dll\nKERNEL32.dll\nUSER32.dll\nSHELL32.dll\nole32.dll\nMSVCP140.dll\nVCRUNTIME140_1.dll\nVCRUNTIME140.dll\napi-ms-win-crt-runtime-l1-1-0.dll\napi-ms-win-crt-stdio-l1-1-0.dll\napi-ms-win-crt-heap-l1-1-0.dll\napi-ms-win-crt-math-l1-1-0.dll\napi-ms-win-crt-locale-l1-1-0.dll\n</code></pre>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/find-dependencies.png\" alt=\"find dependencies\"></p>\n<p>Locate these files in the <code>C:\\Windows\\System32</code> folder and copy them into the <code>Release</code> folder. The following files are required to be included in the root directory of the <code>myapp.exe</code> executable file. You can ignore the rest.</p>\n<pre><code>flutter_windows.dll\nmsvcp140.dll\nmyapp.exe\nvcruntime140.dll\nvcruntime140_1.dll\n</code></pre>\n<p>And finally, after acquiring all the required dependencies, make a <code>zip</code> archive out of the application's folder for distribution.</p>\n","contentHtmlWithAnchors":"<h2>Introduction<a id=\"introduction\"></a></h2>\n<p>Flutter is an open-source framework suitable for developing applications for multiple platforms. You can install it on your operating system of choice for developing web, mobile, and desktop applications; however, you cannot build your applications for all the supported platforms using a single operating system.</p>\n<p>I've been using Linux Operating System as my primary development environment, mainly because of its power and flexibility. However, I can't build Windows applications using Flutter on my Linux machine since it requires Visual Studio 2019 for Windows desktop development with C++. However, there is an effective solution available. In this article, I will explain how to set up all the requirements of Flutter on a Windows Virtual Machine to compile an application targeting the Windows operating system.</p>\n<h2>Create a Virtual Machine<a id=\"create_a_virtual_machine\"></a></h2>\n<p><a href=\"https://www.virtualbox.org/\">VirtualBox</a> enables you to create a virtual machine (VM) on Linux. The first step is to <a href=\"https://www.virtualbox.org/wiki/Downloads\">download</a> and install it on your current operating system. After the installation is complete, open VirtualBox and choose \"New\" to create a new VM.</p>\n<p>Provide a name for your VM, select \"Windows 7\" as your operating system, and set the memory size as you need. If you don't have an existing virtual hard disk, select \"Create a virtual hard disk now.\"</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/create-virtual-machine.png\" alt=\"create a virtual machine\"></p>\n<p>You are required to have at least 30GB of storage on your virtual hard disk. You can choose between a Dynamically Allocated or a Fixed Size virtual hard disk. The Dynamically Allocated type initially takes a limited amount of physical disk space and gradually grows in size as you use your virtual machine. Hence this is a proper choice if the disk space on your system is limited. The Fixed Size type creates a file with the specified size on your physical disk beforehand, and it is much faster than the first type.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/create-virtual-hard-disk.png\" alt=\"create a virtual hard disk\"></p>\n<p>If your host system has multiple CPUs, you can allocate more than one processor to operate your VM. It is better not to exceed the maximum number of recommended processors, in my case, 4 CPUs.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-processor.png\" alt=\"settings, processor\"></p>\n<p>It is recommended to increase the video memory size to the maximum value for improving guest machine performance.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-screen.png\" alt=\"settings, screen\"></p>\n<p>Your created guest virtual machine is like real hardware with all parts configurable. To install an operating system on this machine, you can mount Windows Installation DVD/USB or an ISO image file.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-mount-win7-image.png\" alt=\"settings, mount windows 7 image\"></p>\n<p>You can mount some shared spaces to be accessed by both the host and the guest machine, as this is a more convenient method of sharing storage resources between two operating systems. However, some limitations might occur due to the file system inconsistencies between different types of operating systems.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-shared-folders.png\" alt=\"settings, shared folders\"></p>\n<p>During the initial steps of the Windows installation, you can select the only drive available on the guest machine and create a single partition. Here, Windows 7 automatically creates a System Reserved and a single primary partition. Select the primary partition for OS installation.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/windows-setup-create-new-partition.png\" alt=\"windows setup, create new partition\"></p>\n<p>Continue with the remaining configurations until the Windows installation is initiated. The installation process takes some time based on the type of hardware you have.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-windows.png\" alt=\"windows setup, installation started\"></p>\n<p>During the installation, your guest machine will restart multiple times. Do not press any keys if it asks, or the process will be started from the beginning. You can unmount the ISO image file when the installation is finished successfully.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/windows-installed.png\" alt=\"windows setup, installation finished\"></p>\n<p>Open menu \"Devices\" and select \"Insert Guest Additions CD Image...\" to mount VirtualBox Guest Additions 5.1.18, then run it. After it is finished, you should reboot your guest machine for all the changes to take effect. Now, you will be able to change the size of the guest machine's window on your host operating system.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/virtualbox-guest-additions.png\" alt=\"windows setup, installation finished\"></p>\n<h2>Update Windows PowerShell<a id=\"update_windows_powershell\"></a></h2>\n<p>Check the version of the currently installed PowerShell (PS) on your Windows 7 by running Windows PowerShell from the start menu and entering the following command:</p>\n<pre><code>PS C:\\Users\\win7&gt; $PSVersionTable.PSVersion\n\nMajor  Minor  Build  Revision\n-----  -----  -----  --------\n2      0      -1     -1\n</code></pre>\n<p>Flutter depends on Windows Powershell 5.0 or higher, so we have to update it now. After downloading <a href=\"https://docs.microsoft.com/en-us/powershell/scripting/install/installing-windows-powershell\">Windows Powershell 5.1</a> and extracting <code>Win7AndW2K8R2-KB3191566-x64.zip</code> file, run existing PS in administrator mode and disable <code>ExecutionPolicy</code> before executing <code>Install-WMF5.1</code> script:</p>\n<pre><code>PS C:\\Users\\win7\\Downloads\\Win7AndW2k8R2-KB3191566-x64&gt; Set-ExecutionPolicy Bypass\nPS C:\\Users\\win7\\Downloads\\Win7AndW2k8R2-KB3191566-x64&gt; powershell.exe -F .\\Install-WMF5.1.ps1\n</code></pre>\n<p>After a mandatory system restart, verify the current PS version again for confirmation.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/verify-powershell.png\" alt=\"verify powershell\"></p>\n<h2>Install Git<a id=\"install_git\"></a></h2>\n<p>Download and install <a href=\"https://git-scm.com/download/win\">Git 64-bit for Windows</a>. You should be able to run <code>git</code> commands from PS after the installation is complete.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-git-on-windows-vm.png\" alt=\"installing git on windows vm\"></p>\n<h2>Install Visual Studio 2019<a id=\"install_visual_studio_2019\"></a></h2>\n<p>To create Windows applications using Flutter, you should have <a href=\"https://visualstudio.microsoft.com/downloads/\">Visual Studio 2019 Community</a> on your system.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/downloading-visualstudio.png\" alt=\"downloading visual studio\"></p>\n<p>For Win32, you need the \"Desktop development with C++\" workload installed, including all of its default components. For UWP, you need the \"Universal Windows Platform development\" workload installed with the optional UWP C++ tools.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-visualstudio.png\" alt=\"installing visual studio\"></p>\n<h2>Install Flutter<a id=\"install_flutter\"></a></h2>\n<p>Now is the time to set up Flutter on your VM. Download <a href=\"https://storage.googleapis.com/flutter_infra_release/releases/stable/windows/flutter_windows_2.5.3-stable.zip\">flutter_windows_2.5.3-stable.zip</a> and extract the content of the archive to <code>C:\\flutter</code>. Then, search for <code>env</code> in Windows and add <code>Path</code> as a user environment variable with the <code>C:\\flutter\\bin</code> value. It enables you to call Flutter from any path in PS.</p>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/add-flutter-to-path-env-variable.png\" alt=\"add flutter to windows envirtonment variable\"></p>\n<h2>Enable Desktop Support<a id=\"enable_desktop_support\"></a></h2>\n<p>Open a PS and modify Flutter configuration to enable Windows Desktop support.</p>\n<pre><code>PS C:\\&gt; flutter config --enable-windows-desktop\n</code></pre>\n<p>For Universal Windows Platform (UWP) applications, use the following commands:</p>\n<pre><code>PS C:\\&gt; flutter channel dev\nPS C:\\&gt; flutter upgrade\nPS C:\\&gt; flutter config --enable-windows-uwp-desktop\n</code></pre>\n<h2>Build an Application<a id=\"build_an_application\"></a></h2>\n<p>To create a new Flutter application, open a PS and call the <code>flutter create</code> command. After the application is created, build and release it for the Windows platform.</p>\n<pre><code>PS C:\\projects&gt; flutter create myapp\nPS C:\\projects\\myapp&gt; cd myapp\nPS C:\\projects\\myapp&gt; flutter run -d windows --release\n</code></pre>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/build-a-flutter-app-for-windows.png\" alt=\"build a flutter application for windows\"></p>\n<h2>Distribute as a Zip File<a id=\"distribute_as_a_zip_file\"></a></h2>\n<p>The most efficient way of finding dependencies of an executable file in Windows is using <code>dumpbin.exe</code> from Microsoft Visual Studio tools. This program is able to list all the <code>dll</code> files required for the Flutter application to run on Windows properly.</p>\n<pre><code>PS C:\\&gt; cd C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64\nPS C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64&gt; dumpbin.exe /dependents C:\\projects\\myapp\\build\\windows\\runner\\Release\\myapp.exe\n\nflutter_windows.dll\nKERNEL32.dll\nUSER32.dll\nSHELL32.dll\nole32.dll\nMSVCP140.dll\nVCRUNTIME140_1.dll\nVCRUNTIME140.dll\napi-ms-win-crt-runtime-l1-1-0.dll\napi-ms-win-crt-stdio-l1-1-0.dll\napi-ms-win-crt-heap-l1-1-0.dll\napi-ms-win-crt-math-l1-1-0.dll\napi-ms-win-crt-locale-l1-1-0.dll\n</code></pre>\n<p><img src=\"/post/build-windows-applications-with-flutter-on-a-linux-machine/find-dependencies.png\" alt=\"find dependencies\"></p>\n<p>Locate these files in the <code>C:\\Windows\\System32</code> folder and copy them into the <code>Release</code> folder. The following files are required to be included in the root directory of the <code>myapp.exe</code> executable file. You can ignore the rest.</p>\n<pre><code>flutter_windows.dll\nmsvcp140.dll\nmyapp.exe\nvcruntime140.dll\nvcruntime140_1.dll\n</code></pre>\n<p>And finally, after acquiring all the required dependencies, make a <code>zip</code> archive out of the application's folder for distribution.</p>\n","contentMarkdown":"\n## Introduction\n\nFlutter is an open-source framework suitable for developing applications for multiple platforms. You can install it on your operating system of choice for developing web, mobile, and desktop applications; however, you cannot build your applications for all the supported platforms using a single operating system.\n\nI've been using Linux Operating System as my primary development environment, mainly because of its power and flexibility. However, I can't build Windows applications using Flutter on my Linux machine since it requires Visual Studio 2019 for Windows desktop development with C++. However, there is an effective solution available. In this article, I will explain how to set up all the requirements of Flutter on a Windows Virtual Machine to compile an application targeting the Windows operating system.\n\n## Create a Virtual Machine\n\n[VirtualBox](https://www.virtualbox.org/) enables you to create a virtual machine (VM) on Linux. The first step is to [download](https://www.virtualbox.org/wiki/Downloads) and install it on your current operating system. After the installation is complete, open VirtualBox and choose \"New\" to create a new VM.\n\nProvide a name for your VM, select \"Windows 7\" as your operating system, and set the memory size as you need. If you don't have an existing virtual hard disk, select \"Create a virtual hard disk now.\"\n\n![create a virtual machine](/post/build-windows-applications-with-flutter-on-a-linux-machine/create-virtual-machine.png)\n\nYou are required to have at least 30GB of storage on your virtual hard disk. You can choose between a Dynamically Allocated or a Fixed Size virtual hard disk. The Dynamically Allocated type initially takes a limited amount of physical disk space and gradually grows in size as you use your virtual machine. Hence this is a proper choice if the disk space on your system is limited. The Fixed Size type creates a file with the specified size on your physical disk beforehand, and it is much faster than the first type. \n\n![create a virtual hard disk](/post/build-windows-applications-with-flutter-on-a-linux-machine/create-virtual-hard-disk.png)\n\nIf your host system has multiple CPUs, you can allocate more than one processor to operate your VM. It is better not to exceed the maximum number of recommended processors, in my case, 4 CPUs.\n\n![settings, processor](/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-processor.png)\n\nIt is recommended to increase the video memory size to the maximum value for improving guest machine performance.\n\n![settings, screen](/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-screen.png)\n\nYour created guest virtual machine is like real hardware with all parts configurable. To install an operating system on this machine, you can mount Windows Installation DVD/USB or an ISO image file.\n\n![settings, mount windows 7 image](/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-mount-win7-image.png)\n\nYou can mount some shared spaces to be accessed by both the host and the guest machine, as this is a more convenient method of sharing storage resources between two operating systems. However, some limitations might occur due to the file system inconsistencies between different types of operating systems.\n\n![settings, shared folders](/post/build-windows-applications-with-flutter-on-a-linux-machine/settings-shared-folders.png)\n\nDuring the initial steps of the Windows installation, you can select the only drive available on the guest machine and create a single partition. Here, Windows 7 automatically creates a System Reserved and a single primary partition. Select the primary partition for OS installation.\n\n![windows setup, create new partition](/post/build-windows-applications-with-flutter-on-a-linux-machine/windows-setup-create-new-partition.png)\n\nContinue with the remaining configurations until the Windows installation is initiated. The installation process takes some time based on the type of hardware you have.\n\n![windows setup, installation started](/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-windows.png)\n\nDuring the installation, your guest machine will restart multiple times. Do not press any keys if it asks, or the process will be started from the beginning. You can unmount the ISO image file when the installation is finished successfully.\n\n![windows setup, installation finished](/post/build-windows-applications-with-flutter-on-a-linux-machine/windows-installed.png)\n\nOpen menu \"Devices\" and select \"Insert Guest Additions CD Image...\" to mount VirtualBox Guest Additions 5.1.18, then run it. After it is finished, you should reboot your guest machine for all the changes to take effect. Now, you will be able to change the size of the guest machine's window on your host operating system.\n\n![windows setup, installation finished](/post/build-windows-applications-with-flutter-on-a-linux-machine/virtualbox-guest-additions.png)\n\n## Update Windows PowerShell\n\nCheck the version of the currently installed PowerShell (PS) on your Windows 7 by running Windows PowerShell from the start menu and entering the following command:\n\n```ps\nPS C:\\Users\\win7> $PSVersionTable.PSVersion\n\nMajor  Minor  Build  Revision\n-----  -----  -----  --------\n2      0      -1     -1\n```\n\nFlutter depends on Windows Powershell 5.0 or higher, so we have to update it now. After downloading [Windows Powershell 5.1](https://docs.microsoft.com/en-us/powershell/scripting/install/installing-windows-powershell) and extracting `Win7AndW2K8R2-KB3191566-x64.zip` file, run existing PS in administrator mode and disable `ExecutionPolicy` before executing `Install-WMF5.1` script:\n\n```ps\nPS C:\\Users\\win7\\Downloads\\Win7AndW2k8R2-KB3191566-x64> Set-ExecutionPolicy Bypass\nPS C:\\Users\\win7\\Downloads\\Win7AndW2k8R2-KB3191566-x64> powershell.exe -F .\\Install-WMF5.1.ps1\n```\n\nAfter a mandatory system restart, verify the current PS version again for confirmation.\n\n![verify powershell](/post/build-windows-applications-with-flutter-on-a-linux-machine/verify-powershell.png)\n\n## Install Git\n\nDownload and install [Git 64-bit for Windows](https://git-scm.com/download/win). You should be able to run `git` commands from PS after the installation is complete.\n\n![installing git on windows vm](/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-git-on-windows-vm.png)\n\n## Install Visual Studio 2019\n\nTo create Windows applications using Flutter, you should have [Visual Studio 2019 Community](https://visualstudio.microsoft.com/downloads/) on your system.\n\n![downloading visual studio](/post/build-windows-applications-with-flutter-on-a-linux-machine/downloading-visualstudio.png)\n\nFor Win32, you need the \"Desktop development with C++\" workload installed, including all of its default components. For UWP, you need the \"Universal Windows Platform development\" workload installed with the optional UWP C++ tools.\n\n![installing visual studio](/post/build-windows-applications-with-flutter-on-a-linux-machine/installing-visualstudio.png)\n\n## Install Flutter\n\nNow is the time to set up Flutter on your VM. Download [flutter_windows_2.5.3-stable.zip](https://storage.googleapis.com/flutter_infra_release/releases/stable/windows/flutter_windows_2.5.3-stable.zip) and extract the content of the archive to `C:\\flutter`. Then, search for `env` in Windows and add `Path` as a user environment variable with the `C:\\flutter\\bin` value. It enables you to call Flutter from any path in PS.\n\n![add flutter to windows envirtonment variable](/post/build-windows-applications-with-flutter-on-a-linux-machine/add-flutter-to-path-env-variable.png)\n\n## Enable Desktop Support\n\nOpen a PS and modify Flutter configuration to enable Windows Desktop support.\n\n```shell\nPS C:\\> flutter config --enable-windows-desktop\n```\n\nFor Universal Windows Platform (UWP) applications, use the following commands:\n\n```shell\nPS C:\\> flutter channel dev\nPS C:\\> flutter upgrade\nPS C:\\> flutter config --enable-windows-uwp-desktop\n```\n\n## Build an Application\n\nTo create a new Flutter application, open a PS and call the `flutter create` command. After the application is created, build and release it for the Windows platform.\n\n```shell\nPS C:\\projects> flutter create myapp\nPS C:\\projects\\myapp> cd myapp\nPS C:\\projects\\myapp> flutter run -d windows --release\n```\n\n![build a flutter application for windows](/post/build-windows-applications-with-flutter-on-a-linux-machine/build-a-flutter-app-for-windows.png)\n\n\n## Distribute as a Zip File\n\nThe most efficient way of finding dependencies of an executable file in Windows is using `dumpbin.exe` from Microsoft Visual Studio tools. This program is able to list all the `dll` files required for the Flutter application to run on Windows properly.\n\n```shell\nPS C:\\> cd C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64\nPS C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Community\\VC\\Tools\\MSVC\\14.29.30133\\bin\\Hostx64\\x64> dumpbin.exe /dependents C:\\projects\\myapp\\build\\windows\\runner\\Release\\myapp.exe\n\nflutter_windows.dll\nKERNEL32.dll\nUSER32.dll\nSHELL32.dll\nole32.dll\nMSVCP140.dll\nVCRUNTIME140_1.dll\nVCRUNTIME140.dll\napi-ms-win-crt-runtime-l1-1-0.dll\napi-ms-win-crt-stdio-l1-1-0.dll\napi-ms-win-crt-heap-l1-1-0.dll\napi-ms-win-crt-math-l1-1-0.dll\napi-ms-win-crt-locale-l1-1-0.dll\n```\n\n![find dependencies](/post/build-windows-applications-with-flutter-on-a-linux-machine/find-dependencies.png)\n\nLocate these files in the `C:\\Windows\\System32` folder and copy them into the `Release` folder. The following files are required to be included in the root directory of the `myapp.exe` executable file. You can ignore the rest.\n\n```shell\nflutter_windows.dll\nmsvcp140.dll\nmyapp.exe\nvcruntime140.dll\nvcruntime140_1.dll\n```\n\nAnd finally, after acquiring all the required dependencies, make a `zip` archive out of the application's folder for distribution.","readTime":5,"category":"App Development","title":"Build Windows applications with Flutter on a Linux machine","description":"Use a Windows Virtual Machine on Linux or any host operating system to develop and distribute Windows applications.","date":"2021-11-27","author":"mirbostani","cover":"","tags":"flutter,virtualbox"}},"__N_SSG":true}